{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","thead","tbody","rows","insertAdjacentHTML","numberClicks","indexOfPressedCell","convertToNumber","string","Number","replace","addEventListener","clickEvent","index","sortedColums","target","cellIndex","title","closest","innerText","sort","currentRow","nextRow","currentValue","cells","nextValue","localeCompare","append","reverse","selectedRow","forEach","row","classList","remove","add","form","createNotification","positionTop","positionRight","type","description","notification","createElement","className","dataset","qa","style","top","right","h2","notificationDescription","prepend","setTimeout","preventDefault","data","FormData","employeeName","get","age","position","salary","toLocaleString","length","elements","name","value","selectedField","text","input","eventBlur","replaceWith","eventKeydown","code"],"mappings":"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","file":"main.f5ced8b8.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// write code here\nconst body = document.querySelector('body');\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nconst rows = [...tbody.rows];\n\nbody.insertAdjacentHTML('beforeend', `\n  <form\n    class='new-employee-form'\n    name='new-employee'\n    method='POST'\n    >\n    <label>Name:\n      <input name=\"name\" type=\"text\" data-qa=\"name\" required>\n    </label>\n    <label>Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\">\n    </label>\n    <label>Office:\n      <select name=\"office\" type=\"text\" data-qa=\"office\" required>\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n       </select>\n    </label>\n    <label>Age:\n      <input name=\"age\" type=\"number\" data-qa=\"age\" required>\n    </label>\n    <label>Salary:\n      <input name=\"salary\" type=\"number\" data-qa=\"salary\" required>\n    </label>\n    <button type=\"submit\">Save to table</button>\n  </form>\n`);\n\nlet numberClicks = 0;\nlet indexOfPressedCell = 0;\n\nconst convertToNumber = (string) => {\n  return Number(string.replace(/[$,]/g, ''));\n};\n\nthead.addEventListener('click', (clickEvent) => {\n  const index = clickEvent.target.cellIndex;\n  const title = clickEvent.target.closest('th');\n  let sortedColums;\n\n  if (indexOfPressedCell !== index) {\n    numberClicks = 0;\n  }\n\n  indexOfPressedCell = index;\n  numberClicks++;\n\n  switch (title.innerText) {\n    case 'Name':\n    case 'Position':\n    case 'Office':\n      sortedColums = rows.sort(\n        (currentRow, nextRow) => {\n          const currentValue = currentRow.cells[index].innerText;\n          const nextValue = nextRow.cells[index].innerText;\n\n          return currentValue.localeCompare(nextValue);\n        });\n      break;\n\n    case 'Age':\n    case 'Salary':\n      sortedColums = rows.sort((currentRow, nextRow) => {\n        const currentValue = currentRow.cells[index].innerText;\n        const nextValue = nextRow.cells[index].innerText;\n\n        return convertToNumber(currentValue) - convertToNumber(nextValue);\n      });\n  }\n\n  if (numberClicks % 2 !== 0) {\n    tbody.append(...sortedColums);\n  } else {\n    tbody.append(...sortedColums.reverse());\n  }\n});\n\ntbody.addEventListener('click', (clickEvent) => {\n  const selectedRow = clickEvent.target.closest('tr');\n\n  rows.forEach(row => row.classList.remove('active'));\n  selectedRow.classList.add('active');\n});\n\nconst form = document.querySelector('form');\n\nform.addEventListener('submit', (clickEvent) => {\n  clickEvent.preventDefault();\n\n  const data = new FormData(form);\n  const employeeName = data.get('name');\n  const age = data.get('age');\n  const position = data.get('position');\n  const salary = '$' + (Number(data.get('salary')).toLocaleString('en'));\n  const minAge = 18;\n  const maxAge = 90;\n  const minNameLength = 4;\n\n  if (employeeName.length >= 4 && position !== '' && age >= 18 && age <= 90) {\n    tbody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${employeeName}</td>\n      <td>${position}</td>\n      <td>${data.get('office')}</td>\n      <td>${age}</td>\n      <td>${salary}</td>\n    </tr>\n  `);\n\n    form.elements.name.value = '';\n    form.elements.age.value = '';\n    form.elements.position.value = '';\n    form.elements.salary.value = '';\n\n    createNotification(\n      10,\n      10,\n      'success',\n      'Success',\n      'New employee was successfully added'\n    );\n  }\n\n  if (employeeName.length < minNameLength) {\n    createNotification(\n      350,\n      10,\n      'error',\n      'Error',\n      'Name should consist of 5 or more letters'\n    );\n  };\n\n  if (!position) {\n    createNotification(\n      170,\n      10,\n      'error',\n      'Error',\n      'Please indicate the correct position',\n    );\n  }\n\n  if (age < minAge || age > maxAge) {\n    createNotification(\n      0,\n      10,\n      'error',\n      'Error',\n      'Age should not be less than 18 or more than 90'\n    );\n  }\n});\n\nfunction createNotification(\n  positionTop,\n  positionRight,\n  type,\n  title,\n  description) {\n  const notification = document.createElement('div');\n\n  notification.className = `notification ${type}`;\n  notification.dataset.qa = 'notification';\n  notification.style.top = positionTop + 'px';\n  notification.style.right = positionRight + 'px';\n\n  const h2 = document.createElement('h2');\n\n  h2.className = 'title';\n  h2.innerText = title;\n\n  const notificationDescription = document.createElement('p');\n\n  notificationDescription.innerText = description;\n  notification.append(h2, notificationDescription);\n\n  body.prepend(notification);\n\n  setTimeout(() => {\n    notification.remove();\n  }, 5000);\n}\n\nlet selectedField = null;\n\ntbody.addEventListener('dblclick', (clickEvent) => {\n  clickEvent.preventDefault();\n\n  if (selectedField) {\n    return;\n  }\n\n  selectedField = clickEvent.target;\n\n  const text = selectedField.innerText;\n  const input = document.createElement('input');\n\n  input.className = 'cell-input';\n  input.value = text;\n\n  input.addEventListener('change', () => {\n    selectedField.innerText = input.value !== '' ? input.value : text;\n  });\n\n  input.addEventListener('blur', (eventBlur) => {\n    eventBlur.target.replaceWith(selectedField);\n    selectedField = null;\n  });\n\n  input.addEventListener('keydown', (eventKeydown) => {\n    if (eventKeydown.code === 'Enter') {\n      eventKeydown.target.replaceWith(selectedField);\n      selectedField = null;\n    }\n  });\n\n  selectedField.replaceWith(input);\n});\n"]}